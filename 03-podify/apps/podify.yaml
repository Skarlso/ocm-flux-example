apiVersion: delivery.ocm.software/v1alpha1
kind: ComponentVersion
metadata:
  name: podify
  namespace: ocm-system
spec:
  interval: 1m0s
  name: github.com/weaveworks/podify
  version:
    semver: v1.0.2-dev
  repository:
    url: ghcr.io/phoban01/ocm-podify
    secretRef:
      name: creds
  verify:
  - name: phoban01
    publicKey:
      secretRef:
        name: phoban01-publickey
  references:
    expand: true
---
apiVersion: delivery.ocm.software/v1alpha1
kind: Diffusion
metadata:
  name: podify
  namespace: ocm-system
spec:
  interval: 1m0s
  prune: true
  componentVersionRef:
    name: podify
    namespace: ocm-system
  resourceSelector:
    skipRoot: true
    followReferences: true
    matchSelector:
    - field: "type"
      values:
      - kustomize.ocm.fluxcd.io
  pipelineTemplateRef:
    kind: GitRepository
    name: flux-system
    namespace: flux-system
    path: ./03-podify/conf/podify-pipeline-template.yaml
  values:
    frontend:
      manifests:
        message: "Welcome to podify"
        color: "yellow"
